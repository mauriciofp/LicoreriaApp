<ion-header>
  <ion-toolbar>
    <ion-title>Distribuidor</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="dealers"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <img [src]="dealerUrlImage" />
  <input type="button" value="Tomar Foto" (click)="takePicture()" />
    <input
      type="button"
      value="Elegir de la galeria"
      (click)="getFromGallery()"
    />
  <form [formGroup]="form">


    <ion-item>
      <ion-label color="primary" position="floating">Nombre</ion-label>
      <ion-input
        type="text"
        placeholder="Nombre"
        formControlName="name"
      ></ion-input>
    </ion-item>
    <div class="err-msg" *ngIf="name.invalid && (name.dirty || name.touched)">
      <p *ngIf="name.hasError('required')">El campo es requerido</p>
      <p *ngIf="name.hasError('notUnique')">
        Ya existe un Distribuidor con el mismo Nombre
      </p>
    </div>
    <ion-item>
      <ion-label color="primary" position="floating">Empresa</ion-label>
      <ion-input
        type="text"
        placeholder="Empresa"
        formControlName="company"
      ></ion-input>
    </ion-item>
    <div
      class="err-msg"
      *ngIf="company.invalid && (company.dirty || company.touched)"
    >
      <p *ngIf="company.hasError('required')">El campo es requerido</p>
    </div>

    <ion-item>
      <ion-label color="primary" position="floating">Email</ion-label>
      <ion-input
        type="text"
        placeholder="Email"
        formControlName="email"
      ></ion-input>
    </ion-item>
    <div
      class="err-msg"
      *ngIf="email.invalid && (email.dirty || email.touched)"
    >
      <p *ngIf="email.hasError('required')">El campo es requerido</p>
      <p *ngIf="email.hasError('email')">Ingrese un email valido</p>
    </div>

    <div formArrayName="phones">
      <ng-container *ngFor="let phone of phones.controls; let i = index">
        <ion-item>
          <ion-label>Numero</ion-label>
          <ion-input placeholder="numero" type="number" [formControlName]="i"></ion-input>
        </ion-item>
        <ion-button (click)="removePhone(i)" *ngIf="i !== 0">Quitar</ion-button>
      </ng-container>

      <ion-button color="primary" (click)="addPhone()">Agregar Numero</ion-button>
    </div>
    <br/>
    <div class="buttons_form_container">
      <ion-button color="primary" (click)="submitForm()" routerLink="../list" [disabled]="form.invalid">Guardar</ion-button>
      <ion-button color="primary">Cancelar</ion-button>
    </div>

  </form>
  <p>{{form.value | json}}</p>
</ion-content>
